<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>夜禹</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事 ">
    <meta name="author" content="夜 禹">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="yemingyu">
    <meta name="twitter:description" content="Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事 ">

    <meta property="og:type" content="article">
    <meta property="og:title" content="yemingyu">
    <meta property="og:description" content="Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事 ">

    <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
    <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="/assets/css/vno.css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/css/tomorrow.css">

    <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
    <meta name="collamark_verify_code" content="c9nhsm80sl">
    
    <link rel="canonical" href="http://yemingyu.com/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="http://yemingyu.com/page/2/" />
    
    <meta property="og:site_name" content="yemingyu" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="yemingyu" />
    <meta property="og:description" content="Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事。 />
    <meta property="og:url" content="http://yemingyu.com/" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="yemingyu" />
    <meta name="twitter:description" content="Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事。" />
    <meta name="twitter:url" content="http://yemingyu.com/" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "yemingyu",
    "url": "http://yemingyu.com/",
    "description": "Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事。"
}
    </script>

    <meta name="generator" content="Ghost 0.7" />
    <link rel="alternate" type="application/rss+xml" title="yemingyu" href="http://yemingyu.com/rss/" />

</head>

  <body class="post-template">
    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/assets/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="http://yemingyu.com" title="前往 夜禹 的主页"><img src="/assets/images/profile.jpg" width="80" alt="夜禹 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="http://yemingyu.com" title="link to homepage for 夜禹">夜禹</a></h1>
        <span class="panel-cover__subtitle panel-subtitle">不积跬步无以至千里，不积小流无以成江海</span>
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">Hello，我是叶鸣宇 (花名夜禹)，一名普通的 iOS开发程序猿。现就职于 北京 蚂蚁金服。 探索代码之源，摸清原理之事。 </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        <p class="panel-cover__description"><a href="http://github.com/yemingyu" target="_blank">所编写的 项目 以及 各种小例子 的代码，欢迎访问</a></p>

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">博客</a></li>
              <li class="navigation__item"><a href="http://github.com/yemingyu" target="_blank" title="我的项目">项目</a></li>
              <li class="navigation__item"><a href="/assets/images/gongzhonghao.jpg" title="微信公众号" target="_blank">微信</a></li>
              <!--li class="navigation__item"><a href="http://eepurl.com/wNSkj" title="邮件订阅本站">订阅</a></li-->
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">


  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/2404119260/" title="夜禹 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>

  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/yemingyu" title="夜禹 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>

  <!-- Twitter -->
  <!--li class="navigation__item">
    <a href="http://twitter.com/yemingyu" title="yemingyu" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li-->

  <!-- Google Plus -->
  <!--li class="navigation__item">
    <a href="https://plus.google.com/107108267983477358170" rel="author" title="Google+" target="_blank">
      <i class='social fa fa-google-plus-square'></i>
      <span class="label">Twitter</span>
    </a>
  </li-->

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:me@yemingyu.com" title="邮件联系我">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>

  </ul>
</nav>          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-slate"></div>
  </div>
</header>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <div class="main-post-list">
  <article class="post-container post-container--single">
    <header class="post-header">
      <div class="post-meta">
        <time datetime="12 Mar 2015" class="post-meta__date date">
        	12 Mar 2015
        </time> 
        &#8226; 
        <span class="post-meta__tags tags">
        	on <a href="/tags/#ghost">ghost</a> <a href="/tags/#buster">buster</a> 
        </span>
      </div>
      <h1 class="post-title">Host a static Ghost blog on GitHub using Buster</h1>
    </header>

    <section class="post">
      <p>I have really enjoyed the simplicity of the <a href="https://github.com/tryghost/Ghost&quot; target=&quot;_blank">Ghost</a> blogging system and wanted to use it for my personal site.  But I also enjoyed the ease of hosting with <a href="https://pages.github.com&quot; target=&quot;_blank">GitHub Pages</a> so I needed to find a way to generate a static version of a Ghost blog.  Luckily someone already had a handy little tool for the job called <a href="https://github.com/axitkhurana/buster&quot; target=&quot;_blank">Buster</a>.</p>

<h3 id="installing-buster">Installing Buster</h3>

<p>Details on Buster can be found <a href="https://github.com/axitkhurana/buster&quot; target=&quot;_blank">here</a>. Basically, you need to install <strong>wget</strong> and <strong>git</strong> with <a href="http://brew.sh/&quot; target=&quot;_blank">brew</a> (if they are not already installed on your system) then install Buster with <a href="https://pip.pypa.io&quot; target=&quot;_blank">pip</a>.  Just run the following commands:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">brew install wget Just run the following commands: Just run the following commands: Just run the following commands:
brew install git
pip install buster</code></pre></div>

<p>To test the install of Buster run the following:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">buster --version</code></pre></div>

<p>You should see current version display (i.e. <code>0.1.3</code>).</p>

<h3 id="setting-up-ghost">Setting up Ghost</h3>

<p>First off you need to download of a copy of the latest version of Ghost found <a href="https://github.com/TryGhost/Ghost/releases&quot; target=&quot;_blank">here</a>. Extract the archive and open a console and go to the newly created directory and run the following:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm install --production
npm start</code></pre></div>

<p>Then visit http://127.0.0.1:2368/ghost in a browser and go through the setup screens to create an admin account and start using ghost.</p>

<h3 id="setting-up-buster">Setting up Buster</h3>

<p>In a new console window go to the directory where ghost is installed and type the following to setup buster:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">buster setup</code></pre></div>

<p>Just follow the prompts and provide the data needed. Please view the README on the <a href="https://github.com/axitkhurana/buster&quot; target=&quot;_blank">Buster GitHub page</a> for more details on how to use Buster.</p>

<h3 id="generating-static-pages-with-buster">Generating static pages with Buster</h3>

<p>At the time of writing this Buster had some issues with missing the generation of some needed files and creating some files with incorrect URL reference in page. I created this script as a workaround for those issue.  So create a file (I called it <strong>build-static.sh</strong>) and be sure and change out the references to http://joshgerdes.com and replace them with your remote site URL.</p>

<p><code>{</code><code>%</code> for link in site.links <code>%</code><code>}</code></p>
<li>
    <a class="page-link" href="`{``{` link.url | prepend: site.baseurl `}``}`">`{``{` link.title `}``}`</a>
</li>
<p><code>{</code><code>%</code> endfor <code>%</code><code>}</code></p>

<p><code>{</code><code>%</code> highlight objc <code>%</code><code>}</code>
	if (currentClass) {
	        unsigned int methodCount;```
	        Method <em>methodList = class_copyMethodList(currentClass, &amp;methodCount);
	        IMP lastImp = NULL;
	        SEL lastSel = NULL;
	        for (NSInteger i = 0; i &lt; methodCount; i++) {
	            Method method = methodList[i];
	            NSString *methodName = [NSString stringWithCString:sel_getName(method_getName(method))
	                                                      encoding:NSUTF8StringEncoding];
	            if ([@”printTest” isEqualToString:methodName]) {
	                lastImp = method_getImplementation(method);
	                lastSel = method_getName(method);
	            }
	        }
	        typedef void (</em>fn)(id,SEL);</p>

<pre><code>        if (lastImp != NULL) {
            fn f = (fn)lastImp;
            f(test,lastSel);
        }
        free(methodList);
} `{``%` endhighlight `%``}`
</code></pre>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="c"># Generate static files with buster</span>
buster generate --domain<span class="o">=</span>http://127.0.0.1:2368  

<span class="c"># Copy sitemap files</span>
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span class="o">=</span>unix http://127.0.0.1:2368/sitemap.xsl
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span class="o">=</span>unix http://127.0.0.1:2368/sitemap.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span class="o">=</span>unix http://localhost:2368/sitemap-pages.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span class="o">=</span>unix http://localhost:2368/sitemap-posts.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span class="o">=</span>unix http://localhost:2368/sitemap-authors.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span class="o">=</span>unix http://localhost:2368/sitemap-tags.xml

<span class="c"># Replace urls that were missed by buster</span>
find static/* -name robots.txt -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#http://localhost:2368#http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>
find static/* -name *.xsl -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#http://localhost:2368#http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>
find static/* -name *.xml -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#loc&gt;http://localhost:2368#loc&gt;http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>
find static/* -name *.html -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#u=http://localhost:2368#u=http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>  
find static/* -name *.html -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#url=http://localhost:2368#url=http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>  
find static/* -name *.html -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#href=&quot;http://localhost:2368#href=&quot;http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>  
find static/* -name *.html -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#src=&quot;http://localhost:2368#src=&quot;http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span>  
find static/* -name *.html -type f -exec sed -i <span class="s1">&#39;&#39;</span> <span class="s1">&#39;s#link&gt;http://localhost:2368#link&gt;http://joshgerdes.com#g&#39;</span> <span class="o">{}</span> <span class="se">\;</span> 

<span class="c"># Add CNAME file for github pages</span>
buster add-domain joshgerdes.com

<span class="c"># Copy files that were missed by buster</span>
cp humans.txt static/humans.txt
cp -R content/images static/content</code></pre></div>

<p>Now give the newly created file execute permissions</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">chmod +x ./build-static.sh</code></pre></div>

<p>Then just run in the directory where you installed ghost:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">./build-static.sh</code></pre></div>

<p>This should generate static files under a subdirectory called <code>/static</code> which should be connected to your GitHub repository.</p>

<p><em><strong>NOTE</strong>: I also forked the Buster repository and made changes to the project to fix the broken URLs and add the sitemap files to the static output.  So if you want to use my version of Buster it can be found <a href="https://github.com/joshgerdes/buster&quot; target=&quot;_blank">here</a>. Hopefully my pull request will be accepted shortly and it will become part of the main script.</em></p>

<h3 id="previewing-static-pages">Previewing static pages</h3>

<p>You can preview the static pages by running the following command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">buster preview</code></pre></div>

<p>Then visit http://localhost:9000 in a browser to view the static pages locally.</p>

<h3 id="deploying-static-pages-to-github">Deploying static pages to GitHub</h3>

<p>If you like what you see, you can push those changes to your GitHub repository using normal commands or type the following command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">buster deploy</code></pre></div>

<p>With luck you should have a nice static version of your site published to GitHub to enjoy.</p>

    </section>
  </article>

<div class="read-more">
   <div class="read-more-item read-more-item-left">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/blog/2015/03/12/host-a-static-ghost-blog-on-github%20copy%202/" title="Host a static Ghost blog on GitHub using Buster" title="link to Host a static Ghost blog on GitHub using Buster">Host a static Ghost blog on GitHub using Buster</a></h2>
       <p class="excerpt">I have really enjoyed the simplicity of the [Ghost](https://github.com/tryghost/Ghost" target="_blank) blogging system and wanted to use it for my personal site.  But I also enjoyed the ease of hosting with [GitHub Pages](https://pages.github.com" target="_blank) so I needed to find a way to generate a static version of a Ghost blog.  Luckily someone already had a handy little tool for the job called [Buster](https://github.com/axitkhurana/buster" target="_blank).

&hellip;</p>
       <!--p class="excerpt">&hellip;</p-->
       <div class="post-list__meta">
       <time datetime="12 Mar 2015" class="post-list__meta--date date">12 Mar 2015
          </time> &#8226;  <span class="post-list__meta--tags tags">
            on 
          </span>
          <a class="btn-border-small" href="/blog/2015/03/12/host-a-static-ghost-blog-on-github%20copy%202/" title="Host a static Ghost blog on GitHub using Buster">继续阅读</a>
        </div>
   </div>

  
   <div class="read-more-item read-more-item-right">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/blog/2015/03/12/host-a-static-ghost-blog-on-github/" title="Host a static Ghost blog on GitHub using Buster" title="link to Host a static Ghost blog on GitHub using Buster">Host a static Ghost blog on GitHub using Buster</a></h2>
       <p class="excerpt">I have really enjoyed the simplicity of the <a href="https://github.com/tryghost/Ghost&quot; target=&quot;_blank">Ghost</a> blogging system and wanted to use it for my personal site.  But I also enjoyed the ease of hosting with <a href="https://pages.github.com&quot; target=&quot;_blank">GitHub Pages</a> so I needed to find a way to generate a static version of a Ghost blog.  Luckily someone already had a handy little tool for the job called <a href="https://github.com/axitkhurana/buster&quot; target=&quot;_blank">Buster</a>.

&hellip;</p>
       <div class="post-list__meta">
       <time datetime="12 Mar 2015" class="post-list__meta--date date">12 Mar 2015
          </time> &#8226;  <span class="post-list__meta--tags tags">
            on 
          </span>
          <a class="btn-border-small" href="/blog/2015/03/12/host-a-static-ghost-blog-on-github/" title="Host a static Ghost blog on GitHub using Buster">继续阅读</a>
        </div>
   </div>

</div>

  <section class="post-comments">
  <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//yemingyu.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</section>
</div>
       <footer class="footer">
	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
    <span class="footer__copyright">基于 <a href="http://jekyll.bootcss.com/">jekyll</a> 搭建，并基于<a href="http://github.com/yemingyu/jekyll-uno">uno</a>与<a href="http://github.com/yemingyu/vno">vno</a>的主题修改</span>
    <span class="footer__copyright">&copy; 2016 - 本站由夜禹创建</span>
</footer>

<!-- You can safely delete this line if your theme does not require jQuery -->
<script type="text/javascript" src="/assets/js/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript">  
      if (typeof jQuery == 'undefined') {
        document.write('<script type="text/javascript" src="/assets/js/jquery-1.12.0.min.js"></'+'script>');
      }
    </script>

    <script type="text/javascript" src="/assets/js/main.js"></script>
    <script type="text/javascript" src="/assets/js/highlight.pack.js"></script>
    
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-25719337-1', 'onevcat.com');
        ga('send', 'pageview');
    </script>
      </div>
    </div>
  </body>
</html>